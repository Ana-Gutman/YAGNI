# ADR009: Implementación del Patrón Pub/Sub con RabbitMQ para la Asignación de Cocinas a Pedidos y Camionetas a Lotes de Cocinas
**Estado:** Aceptada  
**Participantes:** Federica Cabrera y Ana Gutman  

## Contexto
Se requiere una solución para permitir que los módulos se notifiquen sobre eventos críticos en tiempo real, como la asignación de cocinas a pedidos y la asignación de camionetas a lotes de cocinas. Esto debe lograrse de manera eficiente, minimizando la sobrecarga de red, garantizando la escalabilidad y promoviendo el desacoplamiento entre los módulos del sistema.

## Decisión
Se decidió implementar RabbitMQ con el patrón Pub/Sub, utilizando intercambios y colas para la comunicación asincrónica. Este patrón permite que los productores (por ejemplo, la creación de pedidos y lotes) envíen mensajes a un intercambio, que luego distribuye estos mensajes a las colas correspondientes, según el routing key. 

## Opciones Consideradas
- **RabbitMQ basado en listas (List-based):** Aceptado debido a su capacidad para escalar y su naturaleza eficiente para manejar mensajes distribuidos. Cada componente (camioneta o cocina) se suscribe a una cola específica, lo que permite un manejo eficiente de las notificaciones y facilita el desacoplamiento entre módulos.
- **Pub/Sub basado en broadcast:** Rechazado debido a la sobrecarga innecesaria en la red, donde todos los suscriptores recibirían los mensajes sin un filtro adecuado, lo que podría generar un mayor consumo de recursos.

## Consecuencias
- **Beneficios:**  
  - Desacoplamiento entre los módulos, facilitando el mantenimiento y la evolución independiente de las distintas partes del sistema.
  - Escalabilidad horizontal, ya que RabbitMQ puede distribuir mensajes a múltiples consumidores sin afectar el rendimiento.
  - Notificaciones rápidas y en tiempo real entre las partes involucradas.
  
- **Costos:**  
  - Requiere la configuración y el mantenimiento continuo de RabbitMQ.
  - Necesita monitoreo para garantizar que no haya pérdida de mensajes ni problemas con la capacidad de la cola.
  - La integración de RabbitMQ puede agregar complejidad al sistema, pero se considera un costo asumible a cambio de los beneficios a largo plazo.
